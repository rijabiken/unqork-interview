No config file found; using defaults
[WARNING]: provided hosts list is empty, only localhost is available. Note that
the implicit localhost does not match 'all'

PLAY [Create Kubernetes Resources] *********************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Create Namespace] ********************************************************
changed: [localhost] => {"changed": true, "method": "create", "result": {"apiVersion": "v1", "kind": "Namespace", "metadata": {"creationTimestamp": "2023-10-05T16:16:45Z", "labels": {"kubernetes.io/metadata.name": "redis-applications"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:labels": {".": {}, "f:kubernetes.io/metadata.name": {}}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-10-05T16:16:45Z"}], "name": "redis-applications", "resourceVersion": "12429", "uid": "2b14e1f1-6c3f-4066-acba-becf7f3cebd8"}, "spec": {"finalizers": ["kubernetes"]}, "status": {"phase": "Active"}}}

TASK [Deploy redis application] ************************************************
changed: [localhost] => {"changed": true, "method": "create", "result": {"apiVersion": "apps/v1", "kind": "StatefulSet", "metadata": {"creationTimestamp": "2023-10-05T16:16:45Z", "generation": 1, "managedFields": [{"apiVersion": "apps/v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:spec": {"f:podManagementPolicy": {}, "f:replicas": {}, "f:revisionHistoryLimit": {}, "f:selector": {}, "f:serviceName": {}, "f:template": {"f:metadata": {"f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"redis\"}": {".": {}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:ports": {".": {}, "k:{\"containerPort\":6379,\"protocol\":\"TCP\"}": {".": {}, "f:containerPort": {}, "f:protocol": {}}}, "f:resources": {".": {}, "f:requests": {".": {}, "f:cpu": {}, "f:memory": {}}}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}, "f:volumeMounts": {".": {}, "k:{\"mountPath\":\"/data\"}": {".": {}, "f:mountPath": {}, "f:name": {}}}}}, "f:dnsPolicy": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:terminationGracePeriodSeconds": {}}}, "f:updateStrategy": {"f:rollingUpdate": {".": {}, "f:partition": {}}, "f:type": {}}, "f:volumeClaimTemplates": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-10-05T16:16:45Z"}], "name": "redis", "namespace": "redis-applications", "resourceVersion": "12432", "uid": "408a1239-3ac6-4b9f-a796-617e21b25469"}, "spec": {"podManagementPolicy": "OrderedReady", "replicas": 3, "revisionHistoryLimit": 10, "selector": {"matchLabels": {"app": "redis"}}, "serviceName": "redis", "template": {"metadata": {"creationTimestamp": null, "labels": {"app": "redis"}}, "spec": {"containers": [{"image": "redis:latest", "imagePullPolicy": "Always", "name": "redis", "ports": [{"containerPort": 6379, "protocol": "TCP"}], "resources": {"requests": {"cpu": "250m", "memory": "512Mi"}}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/data", "name": "redis-data"}]}], "dnsPolicy": "ClusterFirst", "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "terminationGracePeriodSeconds": 30}}, "updateStrategy": {"rollingUpdate": {"partition": 0}, "type": "RollingUpdate"}, "volumeClaimTemplates": [{"apiVersion": "v1", "kind": "PersistentVolumeClaim", "metadata": {"creationTimestamp": null, "name": "redis-data"}, "spec": {"accessModes": ["ReadWriteOnce"], "resources": {"requests": {"storage": "10Gi"}}, "volumeMode": "Filesystem"}, "status": {"phase": "Pending"}}]}, "status": {"availableReplicas": 0, "replicas": 0}}}

TASK [Create redis service] ****************************************************
changed: [localhost] => {"changed": true, "method": "create", "result": {"apiVersion": "v1", "kind": "Service", "metadata": {"creationTimestamp": "2023-10-05T16:16:46Z", "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:spec": {"f:internalTrafficPolicy": {}, "f:ports": {".": {}, "k:{\"port\":6379,\"protocol\":\"TCP\"}": {".": {}, "f:port": {}, "f:protocol": {}, "f:targetPort": {}}}, "f:selector": {}, "f:sessionAffinity": {}, "f:type": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-10-05T16:16:46Z"}], "name": "redis-service", "namespace": "redis-applications", "resourceVersion": "12450", "uid": "80024298-761e-4f8f-af2e-2a5628942739"}, "spec": {"clusterIP": "10.100.55.35", "clusterIPs": ["10.100.55.35"], "internalTrafficPolicy": "Cluster", "ipFamilies": ["IPv4"], "ipFamilyPolicy": "SingleStack", "ports": [{"port": 6379, "protocol": "TCP", "targetPort": 6379}], "selector": {"app": "redis"}, "sessionAffinity": "None", "type": "ClusterIP"}, "status": {"loadBalancer": {}}}}

TASK [Create HPA for redis] ****************************************************
changed: [localhost] => {"changed": true, "method": "create", "result": {"apiVersion": "autoscaling/v2", "kind": "HorizontalPodAutoscaler", "metadata": {"creationTimestamp": "2023-10-05T16:16:46Z", "managedFields": [{"apiVersion": "autoscaling/v2", "fieldsType": "FieldsV1", "fieldsV1": {"f:spec": {"f:maxReplicas": {}, "f:metrics": {}, "f:minReplicas": {}, "f:scaleTargetRef": {"f:apiVersion": {}, "f:kind": {}, "f:name": {}}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-10-05T16:16:46Z"}], "name": "redis-hpa", "namespace": "redis-applications", "resourceVersion": "12454", "uid": "f36e9bfa-8f74-44c0-83c3-ac688df63273"}, "spec": {"maxReplicas": 5, "metrics": [{"resource": {"name": "cpu", "target": {"averageUtilization": 80, "type": "Utilization"}}, "type": "Resource"}], "minReplicas": 3, "scaleTargetRef": {"apiVersion": "apps/v1", "kind": "StatefulSet", "name": "redis"}}, "status": {"currentMetrics": null, "desiredReplicas": 0}}}

TASK [Create ConfigMap] ********************************************************
changed: [localhost] => {"changed": true, "method": "create", "result": {"apiVersion": "v1", "data": {"ratelimit": "1000", "retry": "5"}, "kind": "ConfigMap", "metadata": {"creationTimestamp": "2023-10-05T16:16:47Z", "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:data": {".": {}, "f:ratelimit": {}, "f:retry": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-10-05T16:16:47Z"}], "name": "redis-configmap", "namespace": "redis-applications", "resourceVersion": "12455", "uid": "672f269d-0558-4a6a-ab5e-eee0cfbbf690"}}}

TASK [Secret creation] *********************************************************
changed: [localhost] => {"changed": true, "method": "create", "result": {"apiVersion": "v1", "data": {"password": "cmVkaXMtcGFzc3dvcmQK", "username": "cmVkaXMtdXNlcm5hbWUK"}, "kind": "Secret", "metadata": {"creationTimestamp": "2023-10-05T16:16:47Z", "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:data": {".": {}, "f:password": {}, "f:username": {}}, "f:type": {}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-10-05T16:16:47Z"}], "name": "redis-secret", "namespace": "redis-applications", "resourceVersion": "12459", "uid": "5cb34a22-621a-4596-b9b0-05020ded808f"}, "type": "Opaque"}}

PLAY RECAP *********************************************************************
localhost                  : ok=7    changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

